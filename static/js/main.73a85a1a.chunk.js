(this["webpackJsonplesson-it-samurai"]=this["webpackJsonplesson-it-samurai"]||[]).push([[0],{104:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var a=n(38),r=n(8),i={dialogs:[{name:"Vitaiy",id:1,img:"https://cdn.pixabay.com/photo/2016/06/14/00/14/cat-1455468_960_720.jpg"},{name:"Sasha",id:2,img:"https://cdn.pixabay.com/photo/2016/06/14/00/14/cat-1455468_960_720.jpg"},{name:"Peter",id:3,img:"https://cdn.pixabay.com/photo/2016/06/14/00/14/cat-1455468_960_720.jpg"},{name:"Katya",id:4,img:"https://cdn.pixabay.com/photo/2016/06/14/00/14/cat-1455468_960_720.jpg"}],messages:[{message:"hi, Vasya",id:1},{message:"How are you?",id:2},{message:"What's up man.",id:3},{message:"Are you crazy?",id:4},{message:"no",id:5}]},c=function(e){return function(t){t(function(e){return{type:"SEND-MESSAGE",message:e}}(e))}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var n={id:5,message:t.message.textMessage};return Object(r.a)({},e,{messages:[].concat(Object(a.a)(e.messages),[n])});default:return e}}},11:function(e,t,n){e.exports={sidebar:"navbar_sidebar__1NVx2",nav:"navbar_nav__2WfiH",navList:"navbar_navList__1JiJH",item:"navbar_item__1zHrh",active:"navbar_active__3YZ9y",friends:"navbar_friends__IfWqY"}},133:function(e,t,n){},134:function(e,t,n){e.exports=n.p+"static/media/loader.d81a7a69.svg"},137:function(e,t,n){},163:function(e,t,n){e.exports=n(292)},168:function(e,t,n){},169:function(e,t,n){},17:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var a=n(130),r=a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"e2714baf-44ef-4f66-8332-c9d8cb5d46cc"}}),i={getUsers:function(e,t){return r.get("users/?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return r.post("follow/".concat(e),{}).then((function(e){return e.data}))},unfollow:function(e){return r.delete("follow/".concat(e)).then((function(e){return e.data}))}},c={singInUser:function(){return r.get("auth/me")},login:function(e){return r.post("/auth/login",e)},logout:function(){return r.delete("/auth/login")}},o={setUserProfile:function(e){return r.get("/profile/".concat(e))},getStatusProfile:function(e){return r.get("profile/status/".concat(e))},updateStatusProfile:function(e){return r.put("profile/status/",{status:e})}}},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(63),c=n.n(i),o=(n(168),n(23)),s=n(24),u=n(26),l=n(25),p=n(27),f=n(33),m=n(14),d=(n(169),n(6)),g=n(129),h=n(128),b=n(94),E=n(104),v={friends:[{id:1,name:"Valya",img:"https://cdn.pixabay.com/photo/2016/06/14/00/14/cat-1455468_960_720.jpg"},{id:2,name:"Lera",img:"https://cdn.pixabay.com/photo/2016/06/14/00/14/cat-1455468_960_720.jpg"},{id:3,name:"Valera",img:"https://cdn.pixabay.com/photo/2016/06/14/00/14/cat-1455468_960_720.jpg"},{id:4,name:"Anna",img:"https://cdn.pixabay.com/photo/2016/06/14/00/14/cat-1455468_960_720.jpg"}]},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;return t.type,e},O=n(9),j=n.n(O),w=n(20),y=n(38),S=n(8),P=n(17),N={users:[],totalUsers:0,pageCurrent:1,pageSize:10,isFetching:!0,followingInProcess:[]},C=function(e){return{type:"users/FOLLOW_TOGGLE",userId:e}},x=function(e){return{type:"users/TOGGLE_FETCHING ",isFetching:e}},T=function(e,t){return{type:"users/FOLLOWING_PROCESS ",followingInProcess:e,userID:t}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/FOLLOW_TOGGLE":return Object(S.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(S.a)({},e,{followed:!e.followed}):e}))});case"users/SET_USERS":return Object(S.a)({},e,{users:Object(y.a)(t.users)});case"users/GET_TOTAL_USERS":return Object(S.a)({},e,{totalUsers:t.total});case"users/SET_CURRENT_PAGE":return Object(S.a)({},e,{pageCurrent:t.currentPage});case"users/TOGGLE_FETCHING ":return Object(S.a)({},e,{isFetching:!t.isFetching});case"users/FOLLOWING_PROCESS ":return Object(S.a)({},e,{followingInProcess:t.followingInProcess?e.followingInProcess.filter((function(e){return e!==t.userID})):[].concat(Object(y.a)(e.followingInProcess),[t.userID])});default:return e}},U=n(45),k={id:null,login:null,email:null,isAuth:!1},L=function(e,t,n,a){return{type:"/auth/SET_AUTH_USER_DATA",payload:{id:e,login:t,email:n,isAuth:a}}},A=function(){return function(){var e=Object(w.a)(j.a.mark((function e(t){var n,a,r,i,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.singInUser();case 2:0===(n=e.sent).data.resultCode&&(a=n.data.data,r=a.id,i=a.email,c=a.login,t(L(r,c,i,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/auth/SET_AUTH_USER_DATA":return Object(S.a)({},e,{},t.payload);default:return e}},R={initialize:!1},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZE_SUCCESS":return Object(S.a)({},e,{initialize:t.initialize});default:return e}},G=Object(d.c)({profilePage:b.b,dialogsPage:E.a,usersPage:I,sidebar:_,auth:z,app:F,form:h.a}),D=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,M=Object(d.e)(G,D(Object(d.a)(g.a)));window.__store__=M;var H=M,V=n(10),W=n(49),q=function(e){return function(t){return r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(e,t))}},J=(n(251),function(){return r.a.createElement("div",null,"Setting")}),Y=(n(252),function(){return r.a.createElement("div",null,"News")}),Z=(n(253),function(){return r.a.createElement("div",null,"Music")}),B=n(11),K=n.n(B),X=n(66),Q=n.n(X),$=function(e){return r.a.createElement("div",{className:Q.a.friend},r.a.createElement("img",{className:Q.a.photo,src:e.img,alt:""}),r.a.createElement("div",{className:Q.a.name},e.name))},ee=function(e){return r.a.createElement("aside",{className:K.a.sidebar},r.a.createElement("nav",{className:K.a.nav},r.a.createElement("ul",{className:K.a.navList},r.a.createElement("li",{className:K.a.item},r.a.createElement(m.b,{to:"/profile",activeClassName:K.a.active},"Profile")),r.a.createElement("li",{className:K.a.item},r.a.createElement(m.b,{exact:!0,to:"/dialogs",activeClassName:K.a.active},"Messages")),r.a.createElement("li",{className:K.a.item},r.a.createElement(m.b,{to:"/news",activeClassName:K.a.active},"News")),r.a.createElement("li",{className:K.a.item},r.a.createElement(m.b,{to:"/music",activeClassName:K.a.active},"Music")),r.a.createElement("li",{className:K.a.item},r.a.createElement(m.b,{to:"/setting",activeClassName:K.a.active},"Setting")),r.a.createElement("li",{className:K.a.item},r.a.createElement(m.b,{to:"/users",activeClassName:K.a.active},"Users")))),r.a.createElement("div",{className:""},r.a.createElement("h3",null,"Friends"),r.a.createElement("div",{className:K.a.friends},e.friends.map((function(e){return r.a.createElement($,{name:e.name,img:e.img})})))))},te=Object(V.b)((function(e){return{friends:e.sidebar.friends}}))(ee),ne=n(127),ae=n(91),re=n.n(ae),ie=function(e){for(var t=Object(a.useState)(0),n=Object(ne.a)(t,2),i=n[0],c=n[1],o=Math.ceil(e.totalPages/e.pageSize),s=e.pageSize*i,u=Math.ceil((i+1)*e.pageSize),l=u>=o?o:u,p=[],f=s;f<=l-1;f++)p.push(f+1);return r.a.createElement("div",{className:re.a.pagination},s>1?r.a.createElement("button",{onClick:function(){c(s<o&&i>0?i-1:0)}},"Prev"):"",p.map((function(t){return isNaN(t)?r.a.createElement("span",{key:o+1},t):r.a.createElement("span",{key:t,onClick:function(){e.onChangePage(t)},className:e.pageCurrent===t?re.a.selectedPage:""},t)})),l!==o?r.a.createElement("button",{onClick:function(){c(s<o?i+1:0)}},"Next"):"")},ce=n(39),oe=n.n(ce),se=function(e){var t=e.user,n=e.followToggle,a=e.followingInProcess;return r.a.createElement("div",{className:oe.a.user},r.a.createElement("div",null,r.a.createElement(m.b,{to:"profile/".concat(t.id)},r.a.createElement("img",{className:oe.a.userPhoto,src:t.photos.large?t.photos.large:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",alt:""})),r.a.createElement("button",{className:oe.a.userFollow,onClick:function(){return n(t.followed,t.id)},disabled:a.some((function(e){return e===t.id}))},t.followed?"unfollow":"follow")),r.a.createElement("div",null,r.a.createElement("h3",{className:oe.a.userName},t.name),r.a.createElement("div",null,t.status)))},ue=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:oe.a.users},e.users.map((function(t){return r.a.createElement(se,{user:t,followingInProcess:e.followingInProcess,f:!0,followToggle:e.followToggle,key:t.id})}))))},le=n(136),pe=Object(le.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),fe=function(e){return e.usersPage.pageSize},me=function(e){return e.usersPage.totalUsers},de=function(e){return e.usersPage.pageCurrent},ge=function(e){return e.usersPage.isFetching},he=function(e){return e.usersPage.followingInProcess},be=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onChangePage=function(e){var t=n.props.pageSize;n.props.usersRequest(e,t)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.pageCurrent,n=e.pageSize;this.props.usersRequest(t,n)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isFetching?r.a.createElement(W.a,null):r.a.createElement(ue,{users:this.props.users,followToggle:this.props.followToggle,followingInProcess:this.props.followingInProcess}),r.a.createElement(ie,{onChangePage:this.onChangePage,pageCurrent:this.props.pageCurrent,pageSize:this.props.pageSize,totalPages:this.props.totalUsers}))}}]),t}(r.a.Component),Ee=Object(V.b)((function(e){return{users:pe(e),pageSize:fe(e),totalUsers:me(e),pageCurrent:de(e),isFetching:ge(e),followingInProcess:he(e)}}),{followToggle:function(e,t){return function(){var n=Object(w.a)(j.a.mark((function n(a){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(T(!1,t)),n.next=3,!e;case 3:if(!n.sent){n.next=7;break}n.t0=P.c.follow(t),n.next=8;break;case 7:n.t0=P.c.unfollow(t);case 8:0===n.t0.resultCode&&(a(C(t)),a(T(!0,t)));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},usersRequest:function(e,t){return function(){var n=Object(w.a)(j.a.mark((function n(a){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(x(!1)),n.next=3,P.c.getUsers(e,t);case 3:r=n.sent,a(x(!0)),a({type:"users/SET_USERS",users:r.items}),a({type:"users/GET_TOTAL_USERS",total:r.totalCount}),a({type:"users/SET_CURRENT_PAGE",currentPage:e});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})(be),ve=n(67),_e=n.n(ve),Oe=function(e){return r.a.createElement("header",{className:_e.a.header},r.a.createElement("div",{className:_e.a.logo},r.a.createElement("img",{src:"https://cdn.pixabay.com/photo/2016/08/25/07/30/orange-1618917_960_720.png",alt:"",className:_e.a.logoImg}),r.a.createElement("h1",null,"social-network")),r.a.createElement("div",{className:"login"},e.isAuth?r.a.createElement("div",null,r.a.createElement("div",null,e.login),r.a.createElement("a",{href:"#",onClick:e.logoutUser},"logout")):r.a.createElement(m.b,{to:"/login"},"login")))},je=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.authUser()}},{key:"render",value:function(){return r.a.createElement(Oe,this.props)}}]),t}(r.a.Component),we=Object(d.d)(Object(V.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{authUser:A,logoutUser:function(){return function(){var e=Object(w.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.logout();case 2:0===e.sent.data.resultCode&&t(L(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(je),ye=n(126),Se=function(e){return{isAuth:e.auth.isAuth}},Pe=function(e){var t=function(t){function n(){return Object(o.a)(this,n),Object(u.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(p.a)(n,t),Object(s.a)(n,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(f.a,{to:"/profile"}):r.a.createElement(e,this.props)}}]),n}(r.a.Component);return Object(V.b)(Se)(t)},Ne=n(37),Ce=n(84),xe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){n.props.loginUser(e)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(Te,{onLogin:this.onSubmit})}}]),t}(r.a.Component),Te=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement(Ie,{onSubmit:e.onLogin}))},Ie=Object(ye.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return r.a.createElement("form",{onSubmit:t},Object(Ne.c)("email","email",Ne.a,[Ce.b],{type:"text"}),Object(Ne.c)("password","password",Ne.a,[Ce.b],{type:"password"}),Object(Ne.c)("","rememberMe",Ne.a,[],{type:"checkbox"},"Remember me"),n&&r.a.createElement("div",{className:"formSummaryError"},n),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Login")))})),Ue=Object(d.d)(Object(V.b)(null,{loginUser:function(e){return function(){var t=Object(w.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.a.login(e);case 2:0===t.sent.data.resultCode?n(A()):n(Object(U.a)("login",{_error:"Some error"}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Pe)(xe),ke=Object(a.lazy)((function(){return n.e(3).then(n.bind(null,299))})),Le=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,300))})),Ae=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.initialize()}},{key:"render",value:function(){return this.props.initializeApp?r.a.createElement(W.a,null):r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(we,null),r.a.createElement(te,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(f.b,{path:"/profile/:userId?",render:q(ke)}),r.a.createElement(f.b,{path:"/dialogs",render:q(Le)}),r.a.createElement(f.b,{path:"/users",render:function(){return r.a.createElement(Ee,null)}}),r.a.createElement(f.b,{path:"/news",component:Y}),r.a.createElement(f.b,{path:"/music",component:Z}),r.a.createElement(f.b,{path:"/setting",component:J}),r.a.createElement(f.b,{path:"/login",component:Ue})))}}]),t}(r.a.Component),ze=Object(d.d)(Object(V.b)((function(e){return{initializeApp:e.app.initialize}}),{initialize:function(){return function(e){var t=e(A());Promise.all([t]).then((function(){e(function(e){return{type:"INITIALIZE_SUCCESS",initialize:e}}(!1))}))}}}),f.f)(Ae),Re=function(e){return r.a.createElement(m.a,null,r.a.createElement(V.a,{store:H},r.a.createElement(ze,null)))};c.a.render(r.a.createElement(Re,null),document.getElementById("root"))},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return f}));var a=n(68),r=n(0),i=n.n(r),c=n(137),o=n.n(c),s=n(87),u=function(e){e.input;var t=e.meta,n=Object(a.a)(e,["input","meta"]),r=t.touched&&t.error;return i.a.createElement("div",{className:o.a.formControl},n.children,r&&i.a.createElement("div",null,i.a.createElement("span",null,t.error)))},l=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,["input","meta"]));return i.a.createElement(u,e,i.a.createElement("textarea",Object.assign({},t,n)))},p=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,["input","meta"]));return i.a.createElement(u,e,i.a.createElement("input",Object.assign({},t,n)))},f=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return i.a.createElement("div",null,i.a.createElement(s.a,Object.assign({placeholder:e,name:t,component:n,validate:a},r)),c&&i.a.createElement("label",{htmlFor:t},c))}},39:function(e,t,n){e.exports={users:"users_users__3ylBV",user:"users_user__uJAzV",userPhoto:"users_userPhoto__1z7Ri",userFollow:"users_userFollow__1iDMh"}},49:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(133),c=n.n(i),o=n(134),s=n.n(o);t.a=function(e){return r.a.createElement("div",{className:c.a.preloader},r.a.createElement("img",{src:s.a,alt:"Preloader"}))}},66:function(e,t,n){e.exports={friend:"friend_friend__MHcwP",photo:"friend_photo__16pU9",name:"friend_name__rW30-"}},67:function(e,t,n){e.exports={header:"header_header__1qOnE",logo:"header_logo__ppD-m",logoImg:"header_logoImg__34Yaf"}},84:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a=function(e){return e&&e.length?void 0:"required field"},r=function(e){return function(t){return t&&t.length<e?void 0:"Max length ".concat(e)}}},91:function(e,t,n){e.exports={pagination:"pagination_pagination__3UfVt",selectedPage:"pagination_selectedPage__3an0S"}},94:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return g}));var a=n(9),r=n.n(a),i=n(20),c=n(38),o=n(8),s=n(17),u="profile/ADD_POST",l={profile:null,status:"",posts:[{id:1,message:"Hello, everyone",countLike:3},{id:2,message:"Hello, everybody",countLike:4},{id:3,message:"This is my code.",countLike:8}]},p=function(e){return{type:"profile/SET_STATUS_PROFILE",status:e}},f=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.setUserProfile(e);case 2:a=t.sent,n({type:"profile/SET_USER_PROFILE",profile:a.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.getStatusProfile(e);case 2:a=t.sent,n(p(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.updateStatusProfile(e);case 2:0===t.sent.resultCode&&n(p(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(t){return t((n=e.postText,{type:u,textPost:n}));var n}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var n={id:5,message:t.textPost,countLike:4};return Object(o.a)({},e,{posts:[].concat(Object(c.a)(e.posts),[n])});case"profile/SET_USER_PROFILE":return Object(o.a)({},e,{profile:Object(o.a)({},t.profile)});case"profile/SET_STATUS_PROFILE":return Object(o.a)({},e,{status:t.status});default:return e}}}},[[163,1,2]]]);
//# sourceMappingURL=main.73a85a1a.chunk.js.map